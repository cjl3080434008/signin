import{u as k,r as m,a as n,A as z,j as U,F as B,i as S,R as F,b as G}from"./useMeasure.7cf04e50.js";var V="https://7th.azureedge.net/$web/assets/vi7th.a14b08ab.jpg";const x=72,q=13,D=5,M=27,R=(f,a)=>{var l;const c=[[1,1,1,1,0,1,1,1,0,1,0,0,1],[0,0,0,1,0,0,1,0,0,1,0,0,1],[0,0,1,0,0,0,1,0,0,1,1,1,1],[0,1,0,0,0,0,1,0,0,1,0,0,1],[0,1,0,0,0,0,1,0,0,1,0,0,1]];return((l=c==null?void 0:c[f])==null?void 0:l[a])===1},W=({x:f,y:a,baseX7:c,baseY7:l,imgSrc:u})=>{const i=R(a-l,f-c);return n("div",{className:`absolute box-border h-[72px] w-[72px] flex overflow-hidden items-center justify-center ${i||!u?"bg-transparent":"bg-white"}`,style:{left:f*x,top:a*x},children:!i&&u&&n("img",{src:u,className:"w-[70px] h-[70px] block object-cover"})})},J=()=>{const[f,{width:a,height:c}]=k(),l=m.exports.useRef(0),u=m.exports.useRef(0),{xItemNum:i,yItemNum:y,baseXOffset:T,baseYOffset:X,baseX7:Y,baseY7:_,cubeIdxs:N}=m.exports.useMemo(()=>{const e=Math.floor(a/x);l.current=e;const t=Math.floor(c/x);u.current=t;const s=(a-e*x)/2,d=(c-t*x)/2,r=Math.floor((e-q)/2),p=Math.floor((t-D)/2),b=[],g=[];for(let o=0;o<e*t;o+=1){const w=Math.floor(o/e),h=o%e;R(w-p,h-r)?g.push(o):b.push(o)}b.sort(()=>Math.random()>.5?-1:1);const v=[...b,...g];return{xItemNum:e,yItemNum:t,baseXOffset:s,baseYOffset:d,baseX7:r,baseY7:p,cubeIdxs:v}},[a,c]),[j,A]=m.exports.useState([]);m.exports.useEffect(()=>{(async()=>{let e=0;const t=async(s=0)=>{var d;try{const r=await((d=S.exports.getAuthClient())==null?void 0:d.getCurrentUser()),p=await fetch("https://7th.pingcap.net/query_list?offset="+s,{method:"GET",mode:"cors",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+(r==null?void 0:r.token)})}),{next_offset:b,pics:g=[]}=await p.json();s=b,A(v=>{let o=[...v,...g];const w=u.current*l.current-M;let h=o.slice(w),I=o.slice(0,w);if(h.length>0){for(let E=0;E<7;E+=1){const O=Math.round(Math.random()*h.length),H=Math.floor(Math.random()*I.length),$=I.splice(H,1,h[O]);h[O]=$}o=[...I,...h]}return o})}catch(r){console.error(r)}window.setTimeout(()=>{t(s)},5*1e3)};t(e)})()},[]);const C=m.exports.useMemo(()=>{const e=j.slice(0,i*y-M),t=[];if(e!=null&&e.length)for(let s=0;s<N.length;s+=1){const d=N[s],r=(e==null?void 0:e[s])&&N.length-s>M?e==null?void 0:e[s]:"";t[d]=r}return t},[j,i,y]);return n("div",{className:"h-screen max-h-screen overflow-hidden bg-vi-base lg:min-w-[1280px] flex flex-col pl-2 box-border",children:n(z,{children:U("div",{className:"relative flex-grow",ref:f,children:[n("div",{className:"absolute inset-0 z-0 flex items-center justify-center overflow-hidden opacity-20",children:n("img",{src:V,className:"block object-contain w-full h-full"})}),a?n("div",{className:"z-20",style:{transform:`translate(${T}px, ${X}px)`},children:C.map((e,t)=>n(W,{y:Math.floor(t/i),x:t%i,baseX7:Y,baseY7:_,imgSrc:e},`${t}`))}):n(B,{})]})})})};F.render(n(G.StrictMode,{children:n(J,{})}),document.getElementById("root"));
