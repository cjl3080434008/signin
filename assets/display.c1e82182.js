import{u as X,r as m,a as r,A as Y,F as A,i as _,R as $,b as B}from"./useMeasure.f9b9459a.js";const f=72,F=13,H=5,S=(l,a)=>{var t;const c=[[1,1,1,1,0,1,1,1,0,1,0,0,1],[0,0,0,1,0,0,1,0,0,1,0,0,1],[0,0,1,0,0,0,1,0,0,1,1,1,1],[0,1,0,0,0,0,1,0,0,1,0,0,1],[0,1,0,0,0,0,1,0,0,1,0,0,1]];return((t=c==null?void 0:c[l])==null?void 0:t[a])===1},k=({x:l,y:a,baseX7:c,baseY7:t,imgSrc:o,isFinished:p})=>{const d=S(a-t,l-c),x=!p&&Math.random()<.06;return r("div",{className:`absolute box-border h-[72px] w-[72px] flex overflow-hidden items-center justify-center ${d||!o?"bg-transparent":"bg-white"}`,style:{left:l*f,top:a*f},children:!d&&o&&r("img",{src:o,className:`w-[70px] h-[70px] block object-cover  ${x?"animate-pulse":""}`})})},C=()=>{const[l,{width:a,height:c}]=X(),{xItemNum:t,yItemNum:o,baseXOffset:p,baseYOffset:d,baseX7:x,baseY7:I}=m.exports.useMemo(()=>{const s=Math.floor(a/f),e=Math.floor(c/f),n=(a-s*f)/2,h=(c-e*f)/2,i=Math.floor((s-F)/2),b=Math.floor((e-H)/2);return{xItemNum:s,yItemNum:e,baseXOffset:n,baseYOffset:h,baseX7:i,baseY7:b}},[a,c]),[u,w]=m.exports.useState([]),[g,M]=m.exports.useState(!1);m.exports.useEffect(()=>{(async()=>{let s=0;const e=async(n=0)=>{var h;try{const i=await((h=_.exports.getAuthClient())==null?void 0:h.getCurrentUser()),b=await fetch("https://7th.pingcap.net/query_list?offset="+n,{method:"GET",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+(i==null?void 0:i.token)})}),{finish:E,next_offset:O,pics:j}=await b.json();n=O,M(E),w(T=>[...T,...j])}catch(i){console.error(i)}window.setTimeout(()=>{e(n)},15*1e3)};e(s)})()},[]);const N=m.exports.useMemo(()=>{const e=[...u.slice(0,t*o)];if(e.length<t*o)for(let n=e.length;n<t*o;n+=1)e.push("");return e.sort(()=>Math.random()>.5?-1:1),e},[u,t,o]),y=m.exports.useMemo(()=>{const s=u.slice(0,t*o),e=[...s];if(s.length<t*o)for(let n=s.length;n<t*o;n+=1){const h=n%s.length;e.push(s[h])}return e},[u,t,o]),v=g?y:N;return r("div",{className:"h-screen max-h-screen overflow-hidden bg-vi-base lg:min-w-[1280px] flex flex-col pl-2 pt-2 box-border",children:r(Y,{children:r("div",{className:"flex-grow relative",ref:l,children:a?r("div",{style:{transform:`translate(${p}px, ${d}px)`},children:v.map((s,e)=>r(k,{y:Math.floor(e/t),x:e%t,baseX7:x,baseY7:I,imgSrc:s,isFinished:g},`${e}`))}):r(A,{})})})})};$.render(r(B.StrictMode,{children:r(C,{})}),document.getElementById("root"));
