import{u as k,r as x,a as n,A as z,j as U,F as B,i as S,R as F,b as G}from"./useMeasure.7cf04e50.js";var V="https://7th.azureedge.net/$web/assets/vi7th.a14b08ab.jpg";const b=72,q=13,D=5,I=27,T=(f,a)=>{var l;const c=[[1,1,1,1,0,1,1,1,0,1,0,0,1],[0,0,0,1,0,0,1,0,0,1,0,0,1],[0,0,1,0,0,0,1,0,0,1,1,1,1],[0,1,0,0,0,0,1,0,0,1,0,0,1],[0,1,0,0,0,0,1,0,0,1,0,0,1]];return((l=c==null?void 0:c[f])==null?void 0:l[a])===1},W=({x:f,y:a,baseX7:c,baseY7:l,imgSrc:u})=>{const i=T(a-l,f-c);return n("div",{className:`absolute box-border h-[72px] w-[72px] flex overflow-hidden items-center justify-center ${i||!u?"bg-transparent":"bg-white"}`,style:{left:f*b,top:a*b},children:!i&&u&&n("img",{src:u,className:"w-[70px] h-[70px] block object-cover"})})},J=()=>{const[f,{width:a,height:c}]=k(),l=x.exports.useRef(0),u=x.exports.useRef(0),{xItemNum:i,yItemNum:j,baseXOffset:X,baseYOffset:Y,baseX7:_,baseY7:A,cubeIdxs:v}=x.exports.useMemo(()=>{const e=Math.floor(a/b);l.current=e;const t=Math.floor(c/b);u.current=t;const s=(a-e*b)/2,d=(c-t*b)/2,r=Math.floor((e-q)/2),g=Math.floor((t-D)/2),p=[],w=[];for(let o=0;o<e*t;o+=1){const N=Math.floor(o/e),h=o%e;T(N-g,h-r)?w.push(o):p.push(o)}p.sort(()=>Math.random()>.5?-1:1);const M=[...p,...w];return{xItemNum:e,yItemNum:t,baseXOffset:s,baseYOffset:d,baseX7:r,baseY7:g,cubeIdxs:M}},[a,c]),[E,C]=x.exports.useState([]);x.exports.useEffect(()=>{(async()=>{let e=0;const t=async(s=0)=>{var d;try{const r=await((d=S.exports.getAuthClient())==null?void 0:d.getCurrentUser()),g=await fetch("https://7th.pingcap.net/query_list?offset="+s,{method:"GET",mode:"cors",headers:new Headers({"Content-Type":"application/json",Authorization:"Bearer "+(r==null?void 0:r.token)})}),{next_offset:p,pics:w=[]}=await g.json();s=p,C(M=>{let o=[...M,...w];const N=u.current*l.current-I;let h=o.slice(N),y=o.slice(0,N);if(h.length>0){for(let O=0;O<7;O+=1){const R=Math.floor(Math.random()*h.length),$=Math.floor(Math.random()*y.length),m=y.splice($,1,h[R]);m!=null&&m[0]&&(h[R]=m==null?void 0:m[0])}o=[...y,...h]}return o})}catch(r){console.error(r)}window.setTimeout(()=>{t(s)},5*1e3)};t(e)})()},[]);const H=x.exports.useMemo(()=>{const e=E.slice(0,i*j-I),t=[];if(e!=null&&e.length)for(let s=0;s<v.length;s+=1){const d=v[s],r=(e==null?void 0:e[s])&&v.length-s>I?e==null?void 0:e[s]:"";t[d]=r}return t},[E,i,j]);return n("div",{className:"h-screen max-h-screen overflow-hidden bg-vi-base lg:min-w-[1280px] flex flex-col pl-2 box-border",children:n(z,{children:U("div",{className:"relative flex-grow",ref:f,children:[n("div",{className:"absolute inset-0 z-0 flex items-center justify-center overflow-hidden opacity-20",children:n("img",{src:V,className:"block object-contain w-full h-full"})}),a?n("div",{className:"z-20",style:{transform:`translate(${X}px, ${Y}px)`},children:H.map((e,t)=>n(W,{y:Math.floor(t/i),x:t%i,baseX7:_,baseY7:A,imgSrc:e},`${t}`))}):n(B,{})]})})})};F.render(n(G.StrictMode,{children:n(J,{})}),document.getElementById("root"));
